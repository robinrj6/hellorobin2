---
const { pathname } = Astro.url;
---

<nav id="site-nav" class="nav">
  <ul>
    <li><a href="/" class={pathname === "/" ? "active" : ""}>Home</a></li>
    <li>
      <a
        href="/projects"
        class={pathname.startsWith("/projects") ? "active" : ""}>Projects</a
      >
    </li>
    <li>
      <a href="/arc" class={pathname.startsWith("/arc") ? "active" : ""}>ARC</a>
    </li>
    <li>
      <a href="/connect" class={pathname.startsWith("/connect") ? "active" : ""}
        >Connect</a
      >
    </li>
  </ul>
</nav>

<script>
  const nav = document.getElementById("site-nav");
  const onScroll = () => nav?.classList.toggle("nav--bg", window.scrollY > 10);
  onScroll();
  window.addEventListener("scroll", onScroll, { passive: true });
  window.addEventListener("astro:unload", () =>
    window.removeEventListener("scroll", onScroll)
  );
</script>

<style>
  @font-face {
    font-family: "Neighbor";
    src: url("/src/assets/fonts/Neighbor.ttf") format("truetype");
  }

  nav {
    margin-top: 0.5rem;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    padding-top: 2rem;
    font-family: Neighbor, sans-serif;
    font-weight: 400;
    z-index: 1000;
    margin-right: auto;
    margin-left: auto;
    
  }
  .nav--bg {
    margin-top: 0.5rem;
    padding: 1rem 0;
    border-radius: 100vmax;
    background-color: rgba(148, 79, 79, 0.183);
    color: rgb(255 255 255 / 60%);
    text-shadow: 0 2px 4px rgb(0 0 0 / 10%);
    font-size: 1.25rem;
    box-shadow:
      0 6px 6px rgb(0 0 0 / 20%),
      0 0 20px rgb(0 0 0 / 10%);
    text-align: center;
    cursor: pointer;
          width: calc((100vw/3) + 2rem);


    &::before,
    &::after {
      content: "";
      position: absolute ;
      inset: 0;
      border-radius: inherit;
      pointer-events: none;

    }

    &::before {
      backdrop-filter: blur(16px);
      filter: url(#glass-distortion);
      z-index: -1;

    }

    &::after {
      box-shadow:
        inset 2px 2px 1px 0 rgb(255 255 255 / 50%),
        inset -1px -1px 1px 1px rgb(255 255 255 / 50%);

    }

  }

  ul {
    list-style: none;
    display: flex;
    gap: 1rem;
    margin: 0;
    padding: 0;
  }

  li {
    text-transform: uppercase;
  }

  a {
    color: rgb(145, 145, 145);
    text-decoration: none;
    position: relative;
    font-size: 1rem;
  }

  a::after {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: rgb(145, 145, 145);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.25s ease-in-out;
  }

  a:hover::after,
  a.active::after {
    transform: scaleX(1);
  }

  a.active {
    font-size: 1.25rem;
  }

  @media screen and (max-width: 906px) {
   

    .nav--bg {
      width: calc((50vw) + 2rem);

    }
  }  @media screen and (max-width: 606px) {
    .nav--bg {
      width: calc((70vw) + 2rem);

    }
  }  @media screen and (max-width: 440px) {
    .nav--bg {
      width: 98%

    }
  }
   
</style>
